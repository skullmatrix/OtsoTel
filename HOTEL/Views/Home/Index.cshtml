@{
    ViewData["Title"] = "Home";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<!-- Hero Section -->
<section class="hero-section">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-6 text-start">
                <h2 class="hero-subtitle">Paradise View</h2>
                <h1 class="hero-title">Hotel for every moment rich in emotion</h1>
                <p class="lead mb-4">Every moment feels like the first time in Paradise View</p>
                <div class="d-flex gap-3">
                    <!-- Book Now Button -->
                    <button class="btn btn-custom book-now-btn" data-bs-toggle="modal" data-bs-target="#loginModal">Book Now</button>
                    <button class="btn btn-outline-light">Take a Tour</button>
                </div>
            </div>
            <div class="col-lg-6 mt-4 mt-lg-0">
                <img src="hotel-image.jpg" class="img-fluid rounded-3 shadow-lg" alt="Luxury Suite">
            </div>
        </div>
    </div>
</section>

<!-- Booking Section -->
<section class="booking-section">
    <div class="container">
        <div class="row g-3">
            <div class="col-md-2">
                <label>Location</label>
                <select class="form-control">
                    <option>Abuja</option>
                    <option>Lagos</option>
                </select>
            </div>
            <div class="col-md-2">
                <label>Room Type</label>
                <select class="form-control">
                    <option>Standard</option>
                    <option>Deluxe</option>
                </select>
            </div>
            <div class="col-md-2">
                <label>Person</label>
                <select class="form-control">
                    <option>01</option>
                    <option>02</option>
                </select>
            </div>
            <div class="col-md-2">
                <label>Check In</label>
                <input type="date" class="form-control" value="2023-03-09">
            </div>
            <div class="col-md-2">
                <label>Check Out</label>
                <input type="date" class="form-control" value="2023-03-13">
            </div>
            <div class="col-md-2 d-grid">
                <!-- Book Now Button -->
                <button class="btn btn-custom h-100 book-now-btn" data-bs-toggle="modal" data-bs-target="#loginModal">Book Now</button>
            </div>
        </div>
    </div>
</section>

<!-- Facilities Section -->
<section class="facilities-section">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="display-5 mb-3">Our Facilities</h2>
            <p class="text-muted">We offer modern (5 star) hotel facilities for your comfort.</p>
        </div>
        <div class="row g-4">
            <div class="col-md-3">
                <div class="facility-card">
                    <i class="fas fa-swimming-pool facility-icon"></i>
                    <h4>Swimming Pool</h4>
                </div>
            </div>
            <div class="col-md-3">
                <div class="facility-card">
                    <i class="fas fa-wifi facility-icon"></i>
                    <h4>Wifi</h4>
                </div>
            </div>
            <div class="col-md-3">
                <div class="facility-card">
                    <i class="fas fa-utensils facility-icon"></i>
                    <h4>Breakfast</h4>
                </div>
            </div>
            <div class="col-md-3">
                <div class="facility-card">
                    <i class="fas fa-dumbbell facility-icon"></i>
                    <h4>Gym</h4>
                </div>
            </div>
            <div class="col-md-3">
                <div class="facility-card">
                    <i class="fas fa-gamepad facility-icon"></i>
                    <h4>Game Center</h4>
                </div>
            </div>
            <div class="col-md-3">
                <div class="facility-card">
                    <i class="fas fa-lightbulb facility-icon"></i>
                    <h4>24/7 Light</h4>
                </div>
            </div>
            <div class="col-md-3">
                <div class="facility-card">
                    <i class="fas fa-soap facility-icon"></i>
                    <h4>Laundry</h4>
                </div>
            </div>
            <div class="col-md-3">
                <div class="facility-card">
                    <i class="fas fa-parking facility-icon"></i>
                    <h4>Parking Space</h4>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Rooms Section -->
<section class="rooms-section">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="display-5 mb-3">Luxurious Rooms</h2>
            <p class="text-muted">All rooms are designed for your comfort.</p>
        </div>
        <div class="row g-4">
            <div class="col-md-4">
                <div class="room-card">
                    <h4>Television Set, Extra Sheets, and Breakfast</h4>
                    <!-- Book Now Button -->
                    <button class="btn btn-custom book-now-btn mt-3" data-bs-toggle="modal" data-bs-target="#loginModal">Book Now</button>
                </div>
            </div>
            <div class="col-md-4">
                <div class="room-card">
                    <h4>Television Set, Extra Sheets, Breakfast, and Fireplace</h4>
                    <!-- Book Now Button -->
                    <button class="btn btn-custom book-now-btn mt-3" data-bs-toggle="modal" data-bs-target="#loginModal">Book Now</button>
                </div>
            </div>
            <div class="col-md-4">
                <div class="room-card">
                    <h4>Television Set, Extra Sheets, Breakfast, Fireplace, Console, and Bed Rest</h4>
                    <!-- Book Now Button -->
                    <button class="btn btn-custom book-now-btn mt-3" data-bs-toggle="modal" data-bs-target="#loginModal">Book Now</button>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Testimonials Section -->
<section class="testimonials-section">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="display-5 mb-3">Testimonies</h2>
        </div>
        <div class="row g-4">
            <div class="col-md-6">
                <div class="testimonial-card">
                    <blockquote>
                        "There was absolutely no issue that was not addressed timely and with satisfactory results. We were particularly impressed with how the hotel staff anticipated our needs (periodically coming by the Board Room to check with us). Numerous conference attendees commented on the quality of the food, the quality of the service, and overall positive attitude toward the conference site. Particular noteworthy is the longevity of the staff and that sense of investment in the success of every event. I usually offer suggestions for improvements (part of being a marketing professor). But there is absolutely nothing that could be improved – you have set the bar very high."
                    </blockquote>
                    <footer>- Anthony Bruff</footer>
                </div>
            </div>
            <div class="col-md-6">
                <div class="testimonial-card">
                    <blockquote>
                        "There was absolutely no issue that was not timely and with satisfactory results. We were impressed with how the hotel staff anticipated (periodically coming by the Board Room to check) numerous conference attendees commented on the quality of the food, the quality of the service, and positive attitude toward the conference site. In addition, we are excited about the development of the staff and the investment in the success of every event. I use suggestions for improvements (part of being a professional), but there is absolutely nothing that happened – you have set the bar very high."
                    </blockquote>
                    <footer>- Jennyn Aliyu</footer>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Login Modal -->
<div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="loginModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="loginModalLabel">Login</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <!-- Login Form -->
                <form id="loginForm">
                    <div class="mb-3">
                        <label for="email" class="form-label">Email address</label>
                        <input type="email" class="form-control" id="email" name="email" required>
                    </div>
                    <div class="mb-3">
                        <label for="password" class="form-label">Password</label>
                        <input type="password" class="form-control" id="password" name="password" required>
                    </div>
                    <button type="submit" class="btn btn-signin w-100">Sign In</button>
                </form>
                <div class="or-divider">OR</div>
                <!-- Google Sign-In Button -->
                <div id="g_id_onload"
                     data-client_id="YOUR_GOOGLE_CLIENT_ID"
                     data-callback="handleCredentialResponse"
                     data-auto_prompt="false">
                </div>
                <div class="g_id_signin"
                     data-type="standard"
                     data-theme="filled_blue"
                     data-text="sign_in_with"
                     data-shape="rectangular"
                     data-logo_alignment="left"
                     data-width="100%">
                </div>
                <!-- Sign Up Link -->
                <div class="text-center mt-3">
                    <p>Don't have an account? <a href="/Account/SignUp" class="text-primary">Sign Up</a></p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Script to Handle Login Form Submission -->
<script>
    document.getElementById('loginForm').addEventListener('submit', function (e) {
        e.preventDefault(); // Prevent default form submission

        const email = document.getElementById('email').value;
        const password = document.getElementById('password').value;

        fetch('/Account/Login', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({ email, password }),
        })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                // Close the modal
                bootstrap.Modal.getInstance(document.getElementById('loginModal')).hide();

                // Redirect to the appropriate page
                if (data.isAdmin) {
                    window.location.href = "/Admin"; // Redirect to Admin page
                } else {
                    window.location.href = "/Home"; // Redirect to Home page
                }
            } else {
                alert("Invalid login attempt. Please check your credentials.");
            }
        })
        .catch(error => {
            console.error("Error during login:", error);
        });
    });
</script>

<script>
    function handleCredentialResponse(response) {
        console.log("ID Token: " + response.credential);

        // Decode the ID token to get user info
        const payload = JSON.parse(atob(response.credential.split('.')[1]));
        const userData = {
            lastName: payload.family_name, // Last name from Google
            firstName: payload.given_name, // First name from Google
            middleName: "", // Middle name is not provided by Google
            email: payload.email,
            password: "google-auth", // Placeholder password for Google users
            address: "", // Address is not provided by Google
            photo: payload.picture
        };

        // Send user data to the server
        fetch('/Account/SaveGoogleUser', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify(userData),
        })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                // Close the modal
                const modal = bootstrap.Modal.getInstance(document.getElementById('loginModal'));
                modal.hide();

                // Refresh the page to update the header
                window.location.reload();
            } else {
                console.error("Error saving user:", data);
            }
        })
        .catch(error => {
            console.error("Error saving user:", error);
        });
    }
</script>