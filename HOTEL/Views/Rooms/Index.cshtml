@model IEnumerable<HotelWebsite.Models.Room>
@{
    ViewData["Title"] = "Our Rooms";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<!-- Hero Section with Background Image -->
<section class="hero-section position-relative vh-100">
    <!-- Background Image -->
    <div class="position-relative h-100">
        <img src="https://images.unsplash.com/photo-1566073771259-6a8506099945?ixlib=rb-1.2.1&auto=format&fit=crop&w=1920&q=80" class="d-block w-100 h-100 object-fit-cover" alt="The Matrix Hotel Rooms">
        <div class="position-absolute top-0 start-0 w-100 h-100 bg-dark opacity-50"></div>
    </div>
    <!-- Hero Content -->
    <div class="position-absolute top-50 start-0 translate-middle-y px-4 px-lg-5 w-100">
        <div class="container">
            <div class="row">
                <div class="col-lg-6 col-md-8 bg-dark bg-opacity-75 p-4 p-md-5 rounded">
                    <h2 class="fs-4 text-white mb-2">THE MATRIX</h2>
                    <h1 class="display-4 fw-bold text-white">Choose Your Reality</h1>
                    <p class="lead mb-4 text-white">Our rooms are designed to transcend ordinary accommodations.</p>
                    <div class="d-flex gap-3">
                        <a href="#room-listings" class="btn btn-primary">View Rooms</a>
                        <a href="@Url.Action("Index", "Home")" class="btn btn-outline-light">Back to Home</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Booking Section -->
<section class="booking-section py-4 shadow bg-white">
    <div class="container">
        <form class="booking-form">
            <div class="row g-3 justify-content-center">
                <div class="col-md-2 col-sm-6">
                    <label class="form-label">Location</label>
                    <select class="form-select">
                        <option selected>Mabolo</option>
                        <option>Colon</option>
                    </select>
                </div>
                <div class="col-md-2 col-sm-6">
                    <label class="form-label">Room Type</label>
                    <select class="form-select" id="roomTypeFilter">
                        <option value="">All Types</option>
                        @foreach (var type in ViewBag.RoomTypes)
                        {
                            if (Context.Request.Query["type"] == type)
                            {
                                <option value="@type" selected>@type</option>
                            }
                            else
                            {
                                <option value="@type">@type</option>
                            }
                        }
                    </select>
                </div>
                <div class="col-md-2 col-sm-6">
                    <label class="form-label">Guests</label>
                    <select class="form-select">
                        <option selected>1</option>
                        <option>2</option>
                        <option>3</option>
                        <option>4</option>
                    </select>
                </div>
                <div class="col-md-2 col-sm-6">
                    <label class="form-label">Check In</label>
                    <input type="date" class="form-control" value="@DateTime.Now.ToString("yyyy-MM-dd")">
                </div>
                <div class="col-md-2 col-sm-6">
                    <label class="form-label">Check Out</label>
                    <input type="date" class="form-control" value="@DateTime.Now.AddDays(4).ToString("yyyy-MM-dd")">
                </div>
                <div class="col-md-2 col-sm-6 d-grid">
                    <label class="invisible form-label">Filter</label>
                    <button type="button" class="btn btn-primary" id="filterRooms">Find Rooms</button>
                </div>
            </div>
        </form>
    </div>
</section>

<!-- Room Types Section -->
<section class="py-5" id="room-listings">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="display-5 fw-bold mb-3">Our Accommodations</h2>
            <p class="text-muted">Find the perfect room for your stay</p>
        </div>

        <!-- Room Type Filter Buttons -->
        <div class="text-center mb-5">
            <div class="btn-group">
                <a href="@Url.Action("Index")" class="btn @(string.IsNullOrEmpty(Context.Request.Query["type"]) ? "btn-primary" : "btn-outline-primary")">All</a>
                @foreach (var type in ViewBag.RoomTypes)
                {
                    <a href="@Url.Action("Index", new { type = type })" class="btn @(Context.Request.Query["type"] == type ? "btn-primary" : "btn-outline-primary")">@type</a>
                }
            </div>
        </div>

        @if (ViewBag.ErrorMessage != null)
        {
            <div class="alert alert-danger alert-dismissible fade show" role="alert">
                @ViewBag.ErrorMessage
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
        }

        @if (ViewBag.SuccessMessage != null)
        {
            <div class="alert alert-success alert-dismissible fade show" role="alert">
                @ViewBag.SuccessMessage
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
        }

        <div class="row g-4">
            @foreach (var room in Model)
            {
                <div class="col-lg-4 col-md-6 mb-4">
                    <div class="card h-100 border-0 shadow-sm">
                        <div class="position-relative">
                            <img src="@room.ImageUrl" class="card-img-top" alt="@room.Type Room">
                            <span class="badge bg-primary position-absolute top-0 end-0 m-3">@room.Type</span>
                        </div>
                        <div class="card-body">
                            <h5 class="card-title">@room.Type Room - @room.RoomNumber</h5>
                            <p class="card-text">@room.Description</p>

                            <div class="d-flex justify-content-between align-items-center mb-3">
                                <span class="fw-bold text-primary fs-4">₱@room.Price<small class="text-muted fs-6">/night</small></span>
                                <span class="badge bg-success">Available</span>
                            </div>

                            <div class="room-features d-flex flex-wrap gap-3 mb-3">
                                <div class="feature d-flex align-items-center">
                                    <i class="fas fa-user-friends text-primary me-2"></i>
                                    <span>@room.Capacity guests</span>
                                </div>
                                <div class="feature d-flex align-items-center">
                                    <i class="fas fa-wifi text-primary me-2"></i>
                                    <span>Free WiFi</span>
                                </div>
                                <div class="feature d-flex align-items-center">
                                    <i class="fas fa-coffee text-primary me-2"></i>
                                    <span>Breakfast</span>
                                </div>
                            </div>

                            <!-- Replace the existing Book Now buttons section with this -->
                            <div class="d-grid gap-2">
                                <a href="@Url.Action("Details", new { id = room.Id })" class="btn btn-outline-primary">View Details</a>
                                <a href="@Url.Action("Create", "Booking", new { roomId = room.Id })" class="btn btn-primary">
                                    <i class="fas fa-calendar-check me-2"></i>Book Now
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            }
        </div>
    </div>
</section>

<!-- Testimonials Section -->
<section class="testimonials-section py-5 bg-light">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="display-5 fw-bold mb-3">Guest Experiences</h2>
            <p class="text-muted">See what others have discovered at The Matrix.</p>
        </div>

        <div id="testimonialCarousel" class="carousel slide" data-bs-ride="carousel">
            <div class="carousel-inner">
                <div class="carousel-item active">
                    <div class="bg-white p-4 rounded shadow">
                        <div class="row">
                            <div class="col-md-3 col-12 mb-3 mb-md-0 text-center">
                                <img src="https://randomuser.me/api/portraits/men/32.jpg" class="rounded-circle mb-3 shadow" width="120" height="120" alt="John Doe">
                                <h5>John Doe</h5>
                                <div class="text-warning mb-2">
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                </div>
                            </div>
                            <div class="col-md-9 col-12">
                                <blockquote class="blockquote">
                                    <p><i class="fas fa-quote-left text-primary me-2 opacity-50"></i>There was absolutely no issue that was not addressed timely and with satisfactory results. We were particularly impressed with how the hotel staff anticipated our needs. Numerous conference attendees commented on the quality of the food, the quality of the service, and overall positive attitude toward the conference site.<i class="fas fa-quote-right text-primary ms-2 opacity-50"></i></p>
                                </blockquote>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="carousel-item">
                    <div class="bg-white p-4 rounded shadow">
                        <div class="row">
                            <div class="col-md-3 col-12 mb-3 mb-md-0 text-center">
                                <img src="https://randomuser.me/api/portraits/women/44.jpg" class="rounded-circle mb-3 shadow" width="120" height="120" alt="Jane Smith">
                                <h5>Jane Smith</h5>
                                <div class="text-warning mb-2">
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star-half-alt"></i>
                                </div>
                            </div>
                            <div class="col-md-9 col-12">
                                <blockquote class="blockquote">
                                    <p><i class="fas fa-quote-left text-primary me-2 opacity-50"></i>My stay at The Matrix was nothing short of exceptional. The room was immaculate, the bed incredibly comfortable, and the service was attentive without being intrusive. The breakfast buffet offered a wide variety of delicious options. I particularly enjoyed the pool area which was well maintained and peaceful.<i class="fas fa-quote-right text-primary ms-2 opacity-50"></i></p>
                                </blockquote>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="d-flex justify-content-center mt-4">
                <button class="btn btn-sm btn-primary mx-1 rounded-circle" type="button" data-bs-target="#testimonialCarousel" data-bs-slide-to="0" aria-current="true" aria-label="Testimonial 1">1</button>
                <button class="btn btn-sm btn-outline-primary mx-1 rounded-circle" type="button" data-bs-target="#testimonialCarousel" data-bs-slide-to="1" aria-label="Testimonial 2">2</button>
            </div>
        </div>
    </div>
</section>

<!-- Simple JavaScript for the Room Filter -->
<script>
    document.addEventListener('DOMContentLoaded', function () {
        // Room type filter functionality
        const roomTypeFilter = document.getElementById('roomTypeFilter');
        const filterButton = document.getElementById('filterRooms');
        
        if (filterButton && roomTypeFilter) {
            filterButton.addEventListener('click', function() {
                const selectedType = roomTypeFilter.value;
                if (selectedType) {
                    window.location.href = '@Url.Action("Index")' + '?type=' + selectedType;
                } else {
                    window.location.href = '@Url.Action("Index")';
                }
            });
        }
        
        // Initialize testimonial carousel buttons
        const testimonialButtons = document.querySelectorAll('[data-bs-target="#testimonialCarousel"]');
        if (testimonialButtons.length > 0) {
            testimonialButtons.forEach(button => {
                button.addEventListener('click', function() {
                    testimonialButtons.forEach(btn => {
                        btn.classList.remove('btn-primary');
                        btn.classList.add('btn-outline-primary');
                    });
                    this.classList.remove('btn-outline-primary');
                    this.classList.add('btn-primary');
                });
            });
        }
    });
</script>